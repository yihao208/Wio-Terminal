# TFT屏幕多功能应用：Hello World与贪吃蛇游戏

## 项目介绍

这是一个基于TFT_eSPI库开发的多功能应用程序，运行在支持TFT显示屏和按键的开发板上（如Wio Terminal）。该项目集成了两个主要功能模式：
- 原始功能模式：包含Hello World显示和计时器功能
- 贪吃蛇游戏模式：经典的贪吃蛇游戏实现

## 功能特性

### 原始功能模式
- **Hello World显示**：简单的问候界面
- **计时器功能**：可启动、暂停的秒表计时器，显示分钟和秒数，以及计时状态

### 贪吃蛇游戏模式
- **完整的贪吃蛇游戏逻辑**：蛇的移动、食物生成、碰撞检测
- **方向控制**：通过五向开关控制蛇的移动方向
- **分数系统**：根据吃到的食物数量计算分数
- **游戏结束检测**：检测蛇头与身体的碰撞
- **穿墙效果**：蛇可以从屏幕一边穿越到另一边
- **游戏结束界面**：显示最终得分和操作提示

## 硬件要求

- 支持TFT显示屏的开发板（如Wio Terminal）
- TFT显示屏（320x240分辨率）
- 按键（WIO_KEY_A, WIO_KEY_B, WIO_KEY_C）
- 五向开关（上下左右和中键）

## 软件要求

- Arduino IDE
- TFT_eSPI库

## 代码结构

### 核心变量

#### 原始功能变量
- `startTime`, `pauseTime`: 计时相关变量
- `isTiming`: 计时状态标志
- `isTimerShow`: 计时器界面显示标志

#### 贪吃蛇游戏变量
- `GRID_SIZE`, `GRID_ROWS`, `GRID_COLS`: 游戏网格设置
- `SNAKE_SPEED`: 蛇的移动速度（毫秒）
- `gameMode`, `gameStarted`, `gameOver`: 游戏状态标志
- `snake[]`: 蛇身各段的位置数组
- `snakeLength`: 蛇的长度
- `dirX`, `dirY`: 蛇的移动方向
- `foodX`, `foodY`: 食物位置

### 主要功能函数

#### 原始功能函数
- `showHelloWorld()`: 显示Hello World界面
- `initTimerDisplay()`: 初始化计时器界面
- `updateTimerDisplay()`: 更新计时器显示
- `checkKeyPress()`: 检测按键操作

#### 贪吃蛇游戏函数
- `initGame()`: 初始化游戏设置
- `spawnFood()`: 生成食物
- `checkDirectionKeys()`: 检测方向键输入
- `moveSnake()`: 移动蛇
- `checkCollision()`: 检测碰撞
- `checkFood()`: 检查是否吃到食物
- `drawGame()`: 绘制游戏画面
- `showGameOverScreen()`: 显示游戏结束界面

## 使用说明

### 模式切换
- **按五向开关的中键**：切换原始功能模式和贪吃蛇游戏模式

### 原始功能模式操作
- **按键A**：显示Hello World界面
- **按键B**：切换到计时器界面
- **按键C**：在计时器界面中启动/暂停计时器

### 贪吃蛇游戏操作
- **五向开关上/下/左/右**：控制蛇的移动方向
- **游戏结束后**：按五向开关中键返回原始功能模式

## 游戏规则

1. 蛇从屏幕中央开始，初始长度为3
2. 通过方向键控制蛇的移动方向
3. 吃到红色食物后，蛇的长度增加1，同时在随机位置生成新的食物
4. 蛇头碰到自己的身体时，游戏结束
5. 蛇可以穿过屏幕边缘，从另一侧出现
6. 游戏分数等于吃到的食物数量（蛇的长度减3）

## 代码优化亮点

1. **模式切换机制**：实现了两个功能模式之间的无缝切换
2. **防抖动处理**：按键输入添加了防抖动延迟，提高了操作稳定性
3. **穿墙效果**：实现了蛇的穿墙移动，增加了游戏的可玩性
4. **代码结构清晰**：功能模块化，便于维护和扩展
5. **食物生成算法**：确保食物不会生成在蛇身上

## 安装指南

1. 确保安装了Arduino IDE
2. 安装TFT_eSPI库
3. 下载本代码并上传到兼容的开发板
4. 确保正确连接TFT显示屏和按键
5. 上电运行，开始使用
